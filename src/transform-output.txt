{
    "baseRules": [
        "http://api.hiproxy.org/ => http://hiproxy.org/api/"
    ],
    "domains": [
        {
            "domain": "$domain",
            "commands": [
                {
                    "name": "proxy_pass",
                    "params": [
                        "\"http://$local/api/mock/"
                    ]
                },
                {
                    "name": "set",
                    "params": [
                        "$id",
                        "1234"
                    ]
                },
                {
                    "name": "set",
                    "params": [
                        "$mock_user",
                        "user_$id"
                    ]
                },
                {
                    "name": "set_header",
                    "params": [
                        "Host",
                        "$domain"
                    ]
                },
                {
                    "name": "set_header",
                    "params": [
                        "UserID",
                        "$mock_user"
                    ]
                },
                {
                    "name": "set_header",
                    "params": [
                        "Access-Control-Allow-Origin",
                        "*"
                    ]
                }
            ],
            "location": [],
            "props": {}
        },
        {
            "domain": "blog.hiproxy.org",
            "commands": [
                {
                    "name": "set_header",
                    "params": [
                        "Access-Control-Allow-Origin",
                        "*"
                    ]
                },
                {
                    "name": "set",
                    "params": [
                        "$node_server",
                        "127.0.0.1:3008"
                    ]
                },
                {
                    "name": "set",
                    "params": [
                        "$order",
                        "order"
                    ]
                },
                {
                    "name": "set",
                    "params": [
                        "$cookie1",
                        "login=true;expires=20160909"
                    ]
                }
            ],
            "location": [
                {
                    "location": "/$api/$order/detail",
                    "commands": [
                        {
                            "name": "proxy_pass",
                            "params": [
                                "http://$node_server/user/?domain=$domain"
                            ]
                        },
                        {
                            "name": "set_header",
                            "params": [
                                "Set-Cookie",
                                "userID",
                                "200908204140"
                            ]
                        }
                    ],
                    "props": {}
                },
                {
                    "location": "~/\\/(usercenter|userinfo)/",
                    "commands": [
                        {
                            "name": "set",
                            "params": [
                                "$cookie",
                                "'login=true;expires=20180808'"
                            ]
                        },
                        {
                            "name": "set",
                            "params": [
                                "$id",
                                "56789"
                            ]
                        },
                        {
                            "name": "proxy_pass",
                            "params": [
                                "http://127.0.0.1:3008/info/"
                            ]
                        },
                        {
                            "name": "set_cookie",
                            "params": [
                                "userID",
                                "200908204140"
                            ]
                        },
                        {
                            "name": "set_cookie",
                            "params": [
                                "userName",
                                "user_$id"
                            ]
                        }
                    ],
                    "props": {}
                },
                {
                    "location": "~/\\/local\\/(.*)(\\?(.*))?/",
                    "commands": [
                        {
                            "name": "send_file",
                            "params": [
                                "./mock/$1.json"
                            ]
                        }
                    ],
                    "props": {}
                },
                {
                    "location": "/dev",
                    "commands": [
                        {
                            "name": "alias",
                            "params": [
                                "./src/view/"
                            ]
                        },
                        {
                            "name": "root",
                            "params": [
                                "app.html"
                            ]
                        }
                    ],
                    "props": {}
                },
                {
                    "location": "/multiple",
                    "commands": [
                        {
                            "name": "echo",
                            "params": [
                                "<h1>hello_echo</h1>"
                            ]
                        },
                        {
                            "name": "echo",
                            "params": [
                                "<p>test echo directive</p>"
                            ]
                        },
                        {
                            "name": "echo",
                            "params": [
                                "<p>finish</p>"
                            ]
                        }
                    ],
                    "props": {}
                }
            ],
            "props": {}
        }
    ],
    "commands": [
        {
            "name": "set",
            "params": [
                "$domain",
                "\"api.hiproxy.org\""
            ]
        },
        {
            "name": "set",
            "params": [
                "$local",
                "\"127.0.0.1:8800\""
            ]
        },
        {
            "name": "set",
            "params": [
                "$api",
                "api"
            ]
        },
        {
            "name": "set",
            "params": [
                "$test",
                "$api.example.com"
            ]
        },
        {
            "name": "set",
            "params": [
                "$id",
                "1234567"
            ]
        }
    ]
}